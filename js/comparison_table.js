(function(){var ForComparison,isObject,isString,rotateText,supportsCanvas,testEquality,testRepr,values;isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},ForComparison=function(){function ForComparison(t){var e,r;this.item=t,this.asString=""+this.item,isString(this.item)?this.item.length>0&&(r=this.item.match(/^`(.*)`$/))?(e=r[1],this.item=new Function("return "+e)(),this.asString=isString(this.item)?JSON.stringify(this.item):void 0===this.item?"undefined":isObject(this.item)?JSON.stringify(this.item):this.item instanceof Function?"("+this.item+")":isNaN(this.item)?"NaN":JSON.stringify(this.item)):0===this.item.length&&(this.asString='""'):"[object Object]"===this.item.toString()?this.asString="{}":this.item instanceof Array&&(this.asString=JSON.stringify(this.item))}return ForComparison.prototype.testResults=function(fc2,comparator){var evalStr,t;return evalStr="",null==comparator&&(comparator="==="),t=this,comparator.split(/&&/).forEach(function(e){var r;return r=!1,e.match(/^!!/)&&(e=e.replace(/^!!/,""),evalStr+="!!(",r=!0),evalStr+="{}"===t.asString?"["+t.asString+e+fc2.asString+"][0]":""+t.asString+e+fc2.asString,r&&(evalStr+=")"),evalStr+="&&"}),evalStr=evalStr.replace(/&&$/,""),[evalStr,eval(evalStr)]},ForComparison.prototype.toString=function(){return this.asString},ForComparison}(),values=[!0,!1,1,0,-1,"`'true'`","`'false'`","`'1'`","`'0'`","`'-1'`","","`null`","`undefined`","`[]`","`{}`",[[]],[0],[1],"`parseFloat('nan')`"],testRepr=function(t,e){var r;if(r=new ForComparison(t),r.toString()!==e)throw new Error("Value is not being represented correctly.")},testRepr(!0,"true"),testRepr(!1,"false"),testRepr(1,"1"),testRepr(0,"0"),testRepr(-1,"-1"),testRepr("`'true'`",'"true"'),testRepr("`'false'`",'"false"'),testRepr("`'1'`",'"1"'),testRepr("`'0'`",'"0"'),testRepr("`'-1'`",'"-1"'),testRepr("",'""'),testRepr("`null`","null"),testRepr("`undefined`","undefined"),testRepr("`[]`","[]"),testRepr("`{}`","{}"),testRepr([[]],"[[]]"),testRepr([0],"[0]"),testRepr([1],"[1]"),testRepr("`parseFloat('nan')`","NaN"),testEquality=function(t,e,r){var n,s;if(n=new ForComparison(e),s=n.testResults(n,r),s[1]!==t)throw new Error("Condition ("+s[0]+") should be "+t)},testEquality(!0,"`true`","=="),testEquality([[]]===[[]],"`[[]]`","=="),testEquality([]===[],"`[]`","=="),supportsCanvas=function(){var t;return t=document.createElement("canvas"),!(!t.getContext||!t.getContext("2d"))}(),this.buildComparisonTable=function(t,e){var r,n,s,i,a,o,l,p,u,c,h,m,f,d,g,S,v,R,C;for(o=function(){var e,r,n;for(n=[],e=0,r=t.length;r>e;e++)c=t[e],n.push(new ForComparison(c));return n}(),s=$("<table>",{"class":"comparisons"}),n=$("<tr>").append("<td>").appendTo(s),f=0,S=o.length;S>f;f++)a=o[f],r=supportsCanvas?rotateText(a.asString):$("<span>",{"class":"rotate",text:a.asString}),$("<td>",{"class":"header col"}).html(r).appendTo(n);for(d=0,v=o.length;v>d;d++)for(h=o[d],i=$("<tr>").appendTo(s),$("<td>",{"class":"row header"}).text(h.asString).appendTo(i),g=0,R=o.length;R>g;g++)m=o[g],p=$("<td>",{"class":"cell",html:"<div>&nbsp;</div>"}).appendTo(i),C=h.testResults(m,e),l=C[0],u=C[1],p.attr("title",""+l+" // "+u),u&&p.addClass("equal");return s},this.buildComparisonTableForIf=function(t){var e,r,n,s,i,a,o,l,p,u;for(i=function(){var e,r,n;for(n=[],e=0,r=t.length;r>e;e++)o=t[e],n.push(new ForComparison(o));return n}(),e=$("<table>",{"class":"comparisons"}),p=0,u=i.length;u>p;p++)s=i[p],n=$("<tr>").html($("<td>",{"class":"header row",text:s.asString})).appendTo(e),r=$("<td>",{"class":"cell"}).html($("<div>",{html:"&nbsp;"})).appendTo(n),l=new Function("if("+s.asString+"){return true}else{return false}")(),l&&r.addClass("equal"),a=" if ("+s.asString+") { /* "+(l?"executes":"does not execute")+" */ } ",$("<td>",{"class":"expression"}).html(a).appendTo(n);return e},rotateText=function(t,e){var r,n;return null==e&&(e=80),n=document.createElement("canvas"),n.width="25",n.height=e,r=n.getContext("2d"),r.rotate(Math.PI/2),r.font="15px Monospace",r.textAlign="right",r.fillText(t,e,-10),n}}).call(this);